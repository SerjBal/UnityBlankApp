# UnityBlankApp üèóÔ∏è

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è Unity, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.
–®–∞–±–ª–æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω—É–∂–¥—ã –ø—Ä–æ–µ–∫—Ç–æ–≤.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —á–µ—Ç–∫–∏–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- –ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`StateMachine`)
- –†–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π, –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∏ –æ—á–∏—Å—Ç–∫–æ–π

### –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–∞—Å—Ç–æ–º–Ω—ã–π DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (`ServiceContainer`)
- AppInjector –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤

### –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π (`IEventBus<T>`)
- –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –°–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º

### –ó–∞—â–∏—Ç–∞ –æ—Ç –≤–∑–ª–æ–º–∞
- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (`SafeInt, SafeFloat, SafeString`)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–∞—Å–ª–µ–¥—É—è—Å—å –æ—Ç `MonoApp`:

```csharp
public class MyGameApp : MonoApp
{
    [SerializeField] private AppSettings _gameSettings;
    [SerializeField] private List<MonoBehaviour> _gameServices;

    protected override void BuildApp()
    {
        _app = new AppBuilder()
            .SetAppSettings(_gameSettings)
            .Build();
    }

    protected override void AddServices()
    {
        // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
        _app.ServiceContainer.AddService(new GameManager());
        _app.ServiceContainer.AddService(new AchievementSystem());
    }
}
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```csharp
public class GameManager : IService, IInitializable
{
    [InjectDependency] private App _app;
    [InjectDependency] private IEventBus<AppEvent> _eventBus;

    public void Init()
    {
        _eventBus.Subscribe<AppInitedEvent>(OnAppInitialized);
    }

    private void OnAppInitialized(AppInitedEvent appEvent)
    {
        // –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –≤–∞—à—É –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É
    }
}
```


### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

–†–∞—Å—à–∏—Ä—å—Ç–µ –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –Ω—É–∂–¥ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```csharp
public class GameplayState : IState
{
    private readonly App _app;

    public GameplayState(App app)
    {
        _app = app;
    }

    public void Execute()
    {
        // –õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–µ–π–º–ø–ª–µ—è
        _app.EventBus.Raise(new GameplayStartedEvent());
    }
}
```

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### AppBuilder

fluent-–ø–æ–¥–æ–±–Ω—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```csharp
var app = new AppBuilder()
    .SetAppSettings(settings)
    .SetStateMachine(customStateMachine)
    .SetServiceContainer(customContainer)
    .Build();
```

### ServiceContainer

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```csharp
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
serviceContainer.AddService<ISceneService>(new SceneSys());

// –ü–æ–ª—É—á–µ–Ω–∏–µ
var sceneService = serviceContainer.GetService<ISceneService>();
```

### StateMachine

```csharp
_stateMachine.AddState(new InjectAppToServicesState(_app, _appInjector));
_stateMachine.SwitchToState<InitAppServicesState>().Execute();
```
